{"version":3,"sources":["app.js"],"names":["Vue","component","props","template","methods","setLocation","item","console","log","$emit","location","data","galleryListHeight","listAr","list","galleryColumn","galleryScrollTop","galleryHeight","galleryRowShow","mounted","self","window","addEventListener","setGalleryListHeight","$http","get","then","response","arr","i","push","$nextTick","setGalleryItemHeightAttr","$el","querySelector","scrollHeight","checkVisible","coef","height","length","top","document","clientWidth","e","rows","rowTop","coeff","target","scrollTop","documentElement","clientHeight","j","number","visible","img","Image","onload","imgload","imgsrc","src","watch","val","oldval","app","el","appLocation","contentMove","links","name","href","sites","createArray","renderLocation","headerMouseover","headerMouseout"],"mappings":";AACAA,IAAIC,SAAJ,CAAc,UAAd,EAA0B;AACtBC,WAAO,CAAC,MAAD,EAAS,aAAT,CADe;AAEtBC,cAAU,WAFY;AAGtBC,aAAS;;AAELC,qBAAa,UAASC,IAAT,EAAe;AACxBC,oBAAQC,GAAR,CAAYF,IAAZ;AACA,iBAAKG,KAAL,CAAW,YAAX,EAAyBH,KAAKI,QAA9B;AACH;AALI;AAHa,CAA1B;;AAYAV,IAAIC,SAAJ,CAAc,WAAd,EAA2B;AACvBC,WAAO,CAAC,MAAD,CADgB;AAEvBC,cAAU;AAFa,CAA3B;;AAKAH,IAAIC,SAAJ,CAAc,cAAd,EAA8B;AAC1BC,WAAO,CAAC,MAAD,CADmB;AAE1BC,cAAU,eAFgB;AAG1BQ,UAAM,YAAW;;AAEb,eAAO;AACHC,+BAAmB,GADhB;AAEHC,oBAAQ,KAAKC,IAFV;AAGHC,2BAAe,CAHZ;AAIHC,8BAAkB,CAJf;AAKHC,2BAAe,IALZ;AAMHC,4BAAgB;AANb,SAAP;AAQH,KAbyB;;AAe1BC,aAAS,YAAW;AAChB,YAAIC,OAAO,IAAX;;AAEAC,eAAOC,gBAAP,CAAwB,QAAxB,EAAkC,YAAW;AACzCF,iBAAKG,oBAAL;AACH,SAFD;;AAIA,aAAKC,KAAL,CAAWC,GAAX,CACI,mBADJ,EAEEC,IAFF,CAGI,UAASC,QAAT,EAAmB;AACf,gBAAIhB,OAAOgB,SAAShB,IAApB;AACA,gBAAIL,OAAOK,KAAK,CAAL,CAAX;AACA,gBAAIiB,MAAM,EAAV;;AAEA,iBAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI,GAAnB,EAAwBA,GAAxB,EAA6B;;AAEzBD,oBAAIE,IAAJ,CAAS;AACL,4BAAQ,OADH;AAEL,4BAAQ,SAFH;AAGL,8BAAU,qCAHL;AAIL,+BAAW,SAJN;AAKL,+BAAW,OALN;AAML,+BAAW,OANN;AAOL,2BAAO;AAPF,iBAAT;AASH;;AAED,iBAAKjB,MAAL,GAAcF,IAAd;;AAGA,iBAAKoB,SAAL,CAAe,YAAW;AACtB,qBAAKR,oBAAL;AACA,qBAAKS,wBAAL;AACA,qBAAKf,aAAL,GAAqB,KAAKgB,GAAL,CAASC,aAAT,CAAuB,gBAAvB,EAAyCC,YAA9D;AACA,qBAAKC,YAAL;AACH,aALD;AAMH,SA9BL;AAgCH,KAtDyB;AAuD1BhC,aAAS;;AAEL4B,kCAA0B,YAAW;AACjC,gBAAIK,OAAO,CAAX;AACA,gBAAIC,SAAS,CAAb;;AAEA,iBAAI,IAAIT,IAAI,CAAZ,EAAeA,IAAI,KAAKhB,MAAL,CAAY0B,MAA/B,EAAuCV,GAAvC,EAA4C;;AAExC,oBAAIA,IAAI,KAAKd,aAAT,KAA2B,CAA/B,EAAkC;AAC9BsB;AACH;;AAEDC,yBAAS,KAAK1B,iBAAL,IAA0ByB,OAAO,CAAjC,CAAT;AACA,qBAAKxB,MAAL,CAAYgB,CAAZ,EAAeW,GAAf,GAAqBF,MAArB;AACA/B,wBAAQC,GAAR,CAAY8B,MAAZ;AACH;AACJ,SAhBI;;AAkBLf,8BAAsB,YAAW;AAC7B,iBAAKX,iBAAL,GAAyB6B,SAASP,aAAT,CAAuB,qBAAvB,EAA8CQ,WAA9C,GAA4D,GAArF;AACH,SApBI;;AAsBLN,sBAAc,UAASO,CAAT,EAAY;;AAEtB,gBAAIvB,OAAO,IAAX;AACA,gBAAIwB,OAAO,CAAX;AACA,gBAAIC,SAAS,CAAb;AACA,gBAAIC,QAAQ,CAAZ;;AAEA,gBAAGH,CAAH,EAAM;AACF,qBAAK3B,gBAAL,GAAwB2B,EAAEI,MAAF,CAASC,SAAjC;AACH,aAFD,MAEO;AACH,qBAAKhC,gBAAL,GAAwB,KAAKiB,GAAL,CAASC,aAAT,CAAuB,gBAAvB,EAAyCc,SAAjE;AACH;;AAED,iBAAI,IAAInB,IAAI,CAAZ,EAAeA,IAAI,KAAKhB,MAAL,CAAY0B,MAA/B,EAAuCV,GAAvC,EAA4C;;AAExC,oBAAI,KAAKhB,MAAL,CAAYgB,CAAZ,EAAeW,GAAf,KAAuBK,MAA3B,EAAmC;AAC/BA,6BAAS,KAAKhC,MAAL,CAAYgB,CAAZ,EAAeW,GAAxB;AACAI;AACH;AACJ;;AAED,iBAAI,IAAIf,IAAI,CAAZ,EAAeA,KAAKe,IAApB,EAA0Bf,GAA1B,EAA+B;;AAE3B,oBAAK,KAAKjB,iBAAL,GAAyBiB,CAAzB,GAA6B,KAAKb,gBAAnC,GAAuDyB,SAASQ,eAAT,CAAyBC,YAApF,EAAkG;;AAE9F,yBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKpC,aAAzB,EAAwCoC,GAAxC,EAA6C;AACzC,4BAAIC,SAASD,IAAIL,KAAjB;;AAEA,4BAAI,OAAO,KAAKjC,MAAL,CAAYuC,MAAZ,CAAP,KAA+B,WAA/B,IAA8C,KAAKvC,MAAL,CAAYuC,MAAZ,EAAoBC,OAApB,KAAgC,OAAlF,EAA2F;;AAEvF,gCAAIC,MAAM,IAAIC,KAAJ,EAAV;AACAD,gCAAIE,MAAJ,GAAa,YAAY;AACrBpC,qCAAKP,MAAL,CAAYuC,MAAZ,EAAoBK,OAApB,GAA8BrC,KAAKP,MAAL,CAAYuC,MAAZ,EAAoBM,MAAlD;AACAtC,qCAAKP,MAAL,CAAYuC,MAAZ,EAAoBC,OAApB,GAA8B,MAA9B;AACH,6BAHD;AAIAC,gCAAIK,GAAJ,GAAUvC,KAAKP,MAAL,CAAYuC,MAAZ,EAAoBM,MAA9B;AACH;AACJ;AACDZ,6BAAS,KAAK/B,aAAd;AACH;AACJ;AACJ;AA/DI,KAvDiB;AAwH1B6C,WAAO;;AAEH9C,cAAM,UAAS+C,GAAT,EAAcC,MAAd,EAAsB;AACxB,iBAAKvC,oBAAL;AACH;AAJE;AAxHmB,CAA9B;;AAgIA,IAAIwC,MAAM,IAAI/D,GAAJ,CAAQ;AACdgE,QAAI,MADU;AAEdrD,UAAM;AACFsD,qBAAa,SADX;AAEFC,qBAAa,IAFX;AAGFC,eAAO,CACH;AACIC,kBAAM,MADV;AAEIC,kBAAM,SAFV;AAGI3D,sBAAU;AAHd,SADG,EAMH;AACI0D,kBAAM,SADV;AAEIC,kBAAM,SAFV;AAGI3D,sBAAU;AAHd,SANG,CAHL;AAeF4D,eAAO;AAfL,KAFQ;;AAoBdnD,aAAS,YAAW;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KA5Ba;;AA8Bdf,aAAS;;AAELmE,qBAAa,UAAS3C,GAAT,EAAc;AACvB,iBAAK0C,KAAL,GAAa1C,GAAb;AACH,SAJI;;AAML4C,wBAAgB,UAAS9D,QAAT,EAAmB;AAC/BH,oBAAQC,GAAR,CAAYE,QAAZ;AACA,iBAAKuD,WAAL,GAAmBvD,QAAnB;AACH,SATI;;AAWL+D,yBAAiB,YAAW;AACxB,iBAAKP,WAAL,GAAmB,CAAC,KAAKA,WAAzB;AACA3D,oBAAQC,GAAR,CAAY,KAAK0D,WAAjB;AACH,SAdI;;AAgBLQ,wBAAgB,YAAW;AACvB,iBAAKR,WAAL,GAAmB,CAAC,KAAKA,WAAzB;AACA3D,oBAAQC,GAAR,CAAY,KAAK0D,WAAjB;AACH;AAnBI;AA9BK,CAAR,CAAV","file":"app.js","sourcesContent":["\r\nVue.component(\"site-nav\", {\r\n    props: [\"list\", \"navlocation\"],\r\n    template: '#site-nav',\r\n    methods: {\r\n\r\n        setLocation: function(item) {\r\n            console.log(item);\r\n            this.$emit(\"link_click\", item.location);\r\n        },\r\n    },\r\n});\r\n\r\nVue.component(\"page-main\", {\r\n    props: [\"list\"],\r\n    template: '#page-main',\r\n});\r\n\r\nVue.component(\"page-gallery\", {\r\n    props: [\"list\"],\r\n    template: '#page-gallery',\r\n    data: function() {\r\n\r\n        return {\r\n            galleryListHeight: 300,\r\n            listAr: this.list,\r\n            galleryColumn: 1,\r\n            galleryScrollTop: 0,\r\n            galleryHeight: null,\r\n            galleryRowShow: 1\r\n        }\r\n    },\r\n    \r\n    mounted: function() {\r\n        var self = this;\r\n\r\n        window.addEventListener(\"resize\", function() {\r\n            self.setGalleryListHeight();\r\n        });\r\n\r\n        this.$http.get(\r\n            'json/gallery.json'\r\n        ).then(\r\n            function(response) {\r\n                var data = response.data;\r\n                var item = data[0];\r\n                var arr = [];\r\n\r\n                for(var i = 0; i < 100; i++) {\r\n\r\n                    arr.push({\r\n                        \"name\": \"site1\",\r\n                        \"href\": \"http://\",\r\n                        \"imgsrc\": \"http://web-dev.pw/images/i_shop.jpg\",\r\n                        \"gitlink\": \"http://\",\r\n                        \"imgload\": \"false\",\r\n                        \"visible\": \"false\",\r\n                        \"top\": \"0\"\r\n                    });\r\n                }\r\n                \r\n                this.listAr = data;\r\n\r\n                \r\n                this.$nextTick(function() {\r\n                    this.setGalleryListHeight();\r\n                    this.setGalleryItemHeightAttr();\r\n                    this.galleryHeight = this.$el.querySelector(\".gallery__list\").scrollHeight;\r\n                    this.checkVisible();\r\n                });\r\n            }\r\n        )\r\n    },\r\n    methods: {\r\n\r\n        setGalleryItemHeightAttr: function() {\r\n            var coef = 1;\r\n            var height = 1;\r\n\r\n            for(var i = 0; i < this.listAr.length; i++) {\r\n\r\n                if (i % this.galleryColumn === 0) {\r\n                    coef++;\r\n                }\r\n\r\n                height = this.galleryListHeight * (coef - 1);\r\n                this.listAr[i].top = height;\r\n                console.log(height);\r\n            }\r\n        },\r\n\r\n        setGalleryListHeight: function() {\r\n            this.galleryListHeight = document.querySelector(\".gallery__list-item\").clientWidth / 1.5;\r\n        },\r\n\r\n        checkVisible: function(e) {\r\n            \r\n            var self = this;\r\n            var rows = 0;\r\n            var rowTop = 0;\r\n            var coeff = 0;\r\n\r\n            if(e) {\r\n                this.galleryScrollTop = e.target.scrollTop;\r\n            } else {\r\n                this.galleryScrollTop = this.$el.querySelector(\".gallery__list\").scrollTop;\r\n            }\r\n\r\n            for(let i = 0; i < this.listAr.length; i++) {\r\n                \r\n                if (this.listAr[i].top !== rowTop) {\r\n                    rowTop = this.listAr[i].top;\r\n                    rows++;\r\n                }\r\n            }\r\n\r\n            for(let i = 1; i <= rows; i++) {\r\n                \r\n                if ((this.galleryListHeight * i - this.galleryScrollTop) < document.documentElement.clientHeight) {\r\n                    \r\n                    for (let j = 0; j < this.galleryColumn; j++) {\r\n                        let number = j + coeff;\r\n\r\n                        if (typeof this.listAr[number] !== \"undefined\" && this.listAr[number].visible === \"false\") {\r\n            \r\n                            let img = new Image();\r\n                            img.onload = function () {\r\n                                self.listAr[number].imgload = self.listAr[number].imgsrc;\r\n                                self.listAr[number].visible = \"true\";\r\n                            }\r\n                            img.src = self.listAr[number].imgsrc;\r\n                        }\r\n                    }\r\n                    coeff += this.galleryColumn;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    watch: {\r\n\r\n        list: function(val, oldval) {\r\n            this.setGalleryListHeight();\r\n        }\r\n    }\r\n});\r\n\r\nvar app = new Vue({\r\n    el: \"#app\",\r\n    data: {\r\n        appLocation: \"gallery\",\r\n        contentMove: true,\r\n        links: [\r\n            {\r\n                name: \"Main\",\r\n                href: \"http://\",\r\n                location: \"main\"\r\n            },\r\n            {\r\n                name: \"Gallery\",\r\n                href: \"http://\",\r\n                location: \"gallery\"\r\n            },\r\n        ],\r\n        sites: []\r\n    },\r\n\r\n    mounted: function() {\r\n        // this.$http.get(\r\n        //     'json/gallery.json'\r\n        // ).then(\r\n        //     function(response) {\r\n        //         this.createArray(response.data);\r\n        //     }\r\n        // )\r\n    },\r\n\r\n    methods: {\r\n\r\n        createArray: function(arr) {\r\n            this.sites = arr;\r\n        },\r\n\r\n        renderLocation: function(location) {\r\n            console.log(location)\r\n            this.appLocation = location;\r\n        },\r\n\r\n        headerMouseover: function() {\r\n            this.contentMove = !this.contentMove;\r\n            console.log(this.contentMove)\r\n        },\r\n\r\n        headerMouseout: function() {\r\n            this.contentMove = !this.contentMove;\r\n            console.log(this.contentMove)\r\n        }\r\n    }\r\n})"]}