{"version":3,"sources":["app.js"],"names":["Vue","component","props","template","methods","setLocation","item","console","log","$emit","location","data","listAr","list","galleryColumn","galleryScrollTop","galleryHeight","galleryRowShow","galleryItemSize","height","width","imgCloudUrl","mounted","self","window","addEventListener","setgalleryItemSize","$http","get","then","response","arr","i","push","$nextTick","$el","querySelector","scrollHeight","checkVisible","document","documentElement","clientHeight","setGalleryItemHeightAttr","coef","length","top","e","rows","rowTop","coeff","target","scrollTop","j","number","visible","imgid","headers","imgload","body","link","error","watch","val","oldval","app","el","appLocation","contentMove","links","name","href","sites","createArray","renderLocation","headerMouseover","headerMouseout"],"mappings":"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","file":"app.js","sourcesContent":["\r\nVue.component(\"site-nav\", {\r\n    props: [\"list\", \"navlocation\"],\r\n    template: '#site-nav',\r\n    methods: {\r\n\r\n        setLocation: function(item) {\r\n            console.log(item);\r\n            this.$emit(\"link_click\", item.location);\r\n        },\r\n    },\r\n});\r\n\r\nVue.component(\"page-main\", {\r\n    props: [\"list\"],\r\n    template: '#page-main',\r\n});\r\n\r\nVue.component(\"page-gallery\", {\r\n    props: [\"list\"],\r\n    template: '#page-gallery',\r\n    data: function() {\r\n\r\n        return {\r\n            listAr: this.list,\r\n            galleryColumn: 2,\r\n            galleryScrollTop: 0,\r\n            galleryHeight: null,\r\n            galleryRowShow: 1,\r\n\t\t\tgalleryItemSize: {\r\n\t\t\t\theight: null,\r\n\t\t\t\twidth: null\r\n\t\t\t},\r\n\t\t\timgCloudUrl: \"https://api.imgur.com/3/image/\"\r\n        }\r\n    },\r\n    \r\n    mounted: function() {\r\n        var self = this;\r\n\r\n        window.addEventListener(\"resize\", function() {\r\n            self.setgalleryItemSize();\r\n        });\r\n\r\n        this.$http.get(\r\n            'json/gallery.json'\r\n        ).then(\r\n            function(response) {\r\n                var data = response.data;\r\n                var arr = [];\r\n\r\n                for(var i = 0; i < 100; i++) {\r\n\r\n                    arr.push({\r\n                        \"name\": \"site1\",\r\n                        \"href\": \"http://\",\r\n                        \"imgsrc\": \"http://web-dev.pw/images/i_shop.jpg\",\r\n                        \"gitlink\": \"http://\",\r\n                        \"imgload\": \"false\",\r\n                        \"visible\": \"false\",\r\n                        \"top\": \"0\",\r\n\t\t\t\t\t\t\"imgid\": \"aT2HpJA\"\r\n                    });\r\n                }\r\n                \r\n                this.listAr = arr;\r\n\r\n                \r\n                this.$nextTick(function() {\r\n                    this.setgalleryItemSize();\r\n                    this.galleryHeight = this.$el.querySelector(\".gallery__list\").scrollHeight;\r\n                    this.checkVisible();\r\n                });\r\n            }\r\n        )\r\n    },\r\n    methods: {\r\n\r\n        setgalleryItemSize: function() {\r\n\t\t\tthis.galleryItemSize.height = document.documentElement.clientHeight / this.galleryColumn;\r\n\t\t\tthis.galleryItemSize.width = 100 / this.galleryColumn;\r\n\t\t\tthis.setGalleryItemHeightAttr();\r\n        },\r\n\r\n        setGalleryItemHeightAttr: function() {\r\n            var coef = 1;\r\n            var height = 1;\r\n\r\n            for(var i = 0; i < this.listAr.length; i++) {\r\n\r\n                if (i % this.galleryColumn === 0) {\r\n                    coef++;\r\n                }\r\n\r\n                height = this.galleryItemSize.height * (coef - 1);\r\n                this.listAr[i].top = height;\r\n            };\r\n        },\r\n\r\n        checkVisible: function(e) {\r\n            \r\n            var self = this;\r\n            var rows = 0;\r\n            var rowTop = 0;\r\n            var coeff = 0;\r\n\r\n            if(e) {\r\n                this.galleryScrollTop = e.target.scrollTop;\r\n            } else {\r\n                this.galleryScrollTop = this.$el.querySelector(\".gallery__list\").scrollTop;\r\n            }\r\n\r\n            for(let i = 0; i < this.listAr.length; i++) {\r\n                \r\n                if (this.listAr[i].top !== rowTop) {\r\n                    rowTop = this.listAr[i].top;\r\n                    rows++;\r\n                }\r\n            }\r\n\r\n            for(let i = 0; i < rows; i++) {\r\n                \r\n                if ((this.galleryItemSize.height * i - this.galleryScrollTop) < document.documentElement.clientHeight) {\r\n                    \r\n                    for (let j = 0; j < this.galleryColumn; j++) {\r\n                        let number = j + coeff;\r\n\r\n                        if (typeof this.listAr[number] !== \"undefined\" && this.listAr[number].visible === \"false\") {\r\n\r\n\t\t\t\t\t\t\tself.$http.get(this.imgCloudUrl + this.listAr[number].imgid, {\r\n\t\t\t\t\t\t\t\theaders: {'authorization': 'Client-ID 4a3569e2cd8829f'},\r\n\t\t\t\t\t\t\t}).then(function(response){\r\n\t\t\t\t\t\t\t\tself.listAr[number].imgload = response.body.data.link;\r\n                                self.listAr[number].visible = \"true\";\r\n\t\t\t\t\t\t\t}, function(error) {\r\n\t\t\t\t\t\t\t\tconsole.log('error');\r\n\t\t\t\t\t\t\t});\r\n\r\n                        }\r\n                    }\r\n                    coeff += this.galleryColumn;\r\n                }\r\n            }\r\n        },\r\n    },\r\n    watch: {\r\n\r\n        list: function(val, oldval) {\r\n            this.setgalleryItemSize();\r\n        }\r\n    }\r\n});\r\n\r\nvar app = new Vue({\r\n    el: \"#app\",\r\n    data: {\r\n        appLocation: \"gallery\",\r\n        contentMove: true,\r\n        links: [\r\n            {\r\n                name: \"Main\",\r\n                href: \"http://\",\r\n                location: \"main\"\r\n            },\r\n            {\r\n                name: \"Gallery\",\r\n                href: \"http://\",\r\n                location: \"gallery\"\r\n            },\r\n        ],\r\n        sites: []\r\n    },\r\n\r\n    methods: {\r\n\r\n        createArray: function(arr) {\r\n            this.sites = arr;\r\n        },\r\n\r\n        renderLocation: function(location) {\r\n            console.log(location)\r\n            this.appLocation = location;\r\n        },\r\n\r\n        headerMouseover: function() {\r\n            this.contentMove = !this.contentMove;\r\n            console.log(this.contentMove)\r\n        },\r\n\r\n        headerMouseout: function() {\r\n            this.contentMove = !this.contentMove;\r\n            console.log(this.contentMove)\r\n        }\r\n    }\r\n})"]}